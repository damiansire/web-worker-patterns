<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>02 - Descarga de C√≥mputo Pesado</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <h1>‚ö° Descarga de C√≥mputo Pesado</h1>
        <p class="subtitle">Ejemplo 02: Evitando el bloqueo de la UI</p>

        <div class="info-box">
            <strong>üí° ¬øQu√© demuestra este ejemplo?</strong>
            Calcula n√∫meros primos de forma intensiva. Prueba ambos botones y observa c√≥mo el contador
            y la animaci√≥n se comportan diferente cuando el c√°lculo se hace en el hilo principal vs. en un worker.
        </div>

        <details class="code-explanation">
            <summary>üìñ Ver C√≥digo - ¬øC√≥mo funciona?</summary>
            
            <div class="code-section">
                <h3>1Ô∏è‚É£ Crear Worker para C√≥mputo (main.js)</h3>
                <pre><code>// Crear worker para tareas pesadas
const worker = new Worker('worker.js');</code></pre>
            </div>

            <div class="code-section">
                <h3>2Ô∏è‚É£ Enviar Tarea al Worker (main.js)</h3>
                <pre><code>// Enviar cantidad de primos a calcular
const count = 50000;
worker.postMessage({ count: count });</code></pre>
            </div>

            <div class="code-section">
                <h3>3Ô∏è‚É£ Procesar en Worker (worker.js)</h3>
                <pre><code>// El worker ejecuta el c√°lculo pesado
self.onmessage = function(e) {
    const { count } = e.data;
    
    // C√°lculo intensivo (esto NO bloquea la UI)
    const primes = calculatePrimes(count);
    
    // Enviar resultado
    self.postMessage({ primes: primes });
};</code></pre>
            </div>

            <div class="code-section">
                <h3>4Ô∏è‚É£ Recibir Resultado (main.js)</h3>
                <pre><code>// Recibir el resultado calculado
worker.onmessage = function(e) {
    const primes = e.data.primes;
    console.log('C√°lculo completo:', primes);
};</code></pre>
            </div>

            <div class="code-flow">
                <h3>üîÑ Ventaja: UI No se Bloquea</h3>
                <div class="comparison">
                    <div class="comparison-item">
                        <h4>‚ùå Sin Worker</h4>
                        <p>‚Ä¢ UI se congela</p>
                        <p>‚Ä¢ Animaciones se detienen</p>
                        <p>‚Ä¢ Usuario no puede interactuar</p>
                    </div>
                    <div class="comparison-item success">
                        <h4>‚úÖ Con Worker</h4>
                        <p>‚Ä¢ UI permanece fluida</p>
                        <p>‚Ä¢ Animaciones contin√∫an</p>
                        <p>‚Ä¢ Usuario puede seguir interactuando</p>
                    </div>
                </div>
            </div>
        </details>

        <div class="demo-section">
            <h3>üî¢ Calculadora de N√∫meros Primos</h3>
            
            <div class="input-group">
                <label for="numberInput">¬øCu√°ntos n√∫meros primos calcular?</label>
                <input 
                    type="number" 
                    id="numberInput" 
                    value="50000" 
                    min="1000" 
                    max="100000"
                    step="1000"
                >
            </div>

            <div class="button-group">
                <button class="btn-worker" id="workerBtn">
                    üöÄ Calcular con Worker<br>
                    <small style="font-size: 11px; font-weight: normal;">(No bloquea la UI)</small>
                </button>
                <button class="btn-main" id="mainBtn">
                    üêå Calcular en Hilo Principal<br>
                    <small style="font-size: 11px; font-weight: normal;">(Bloquea la UI)</small>
                </button>
            </div>

            <div class="spinner" id="spinner"></div>
            <div id="result"></div>
        </div>

        <div class="ui-test">
            <h3 style="margin-bottom: 10px;">üéØ Prueba de Respuesta de la UI</h3>
            <p style="font-size: 14px; opacity: 0.9;">Si la UI est√° bloqueada, este contador se congelar√°</p>
            <div class="counter" id="counter">0</div>
            <div class="animation-box"></div>
            <p style="font-size: 12px; opacity: 0.8;">
                La caja deber√≠a seguir rebotando suavemente
            </p>
        </div>
    </div>

    <script src="main.js"></script>
</body>
</html>

