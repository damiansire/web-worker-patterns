<div class="example-content">
  <h1>{{ texts().title }}</h1>
  <p class="subtitle">{{ texts().subtitle }}</p>

  <div class="main-grid">
    <div class="content-column">
      <app-info-box [title]="texts().infoTitle">
        {{ texts().infoDescription }}
      </app-info-box>

      <app-code-explanation [summaryText]="texts().codeSummary">
        <app-code-section [title]="texts().codeSections.createWorker">
          <pre><code>const myWorker = new Worker('worker.js');</code></pre>
        </app-code-section>
        <app-code-section [title]="texts().codeSections.sendToWorker">
          <pre><code>myWorker.postMessage('¡Hola Worker!');</code></pre>
        </app-code-section>
        <app-code-section [title]="texts().codeSections.receiveInWorker">
          <pre><code>self.onmessage = function(e) {{'{'}}
    const mensaje = e.data;
    const respuesta = 'Procesé tu mensaje: ' + mensaje;
    self.postMessage(respuesta);
{{ '}' }};</code></pre>
        </app-code-section>
        <app-code-section [title]="texts().codeSections.receiveInMain">
          <pre><code>myWorker.onmessage = function(e) {{'{'}}
    const respuesta = e.data;
    console.log('Hilo principal recibió:', respuesta);
{{ '}' }};</code></pre>
        </app-code-section>
      </app-code-explanation>

      <div class="input-group">
        <label for="messageInput">{{ texts().messageLabel }}</label>
        <input
          type="text"
          id="messageInput"
          [placeholder]="texts().messagePlaceholder"
          [value]="messageText()"
          (input)="messageText.set($any($event.target).value)"
          (keypress)="onKeyPress($event)"
        >
      </div>

      <button (click)="sendMessage()">{{ texts().sendButton }}</button>

      <div class="messages">
        @if (messages().length === 0) {
          <p style="color: #999; text-align: center; font-style: italic;">
            {{ texts().emptyState }}
          </p>
        } @else {
          @for (msg of messages(); track $index) {
            <div class="message" [class.from-main]="msg.sender === 'main'" [class.from-worker]="msg.sender === 'worker'">
              <strong>{{ msg.sender === 'main' ? texts().senderMain : texts().senderWorker }}</strong>
              <div>{{ msg.text }}</div>
            </div>
          }
        }
      </div>
    </div>

    <div class="sidebar-column">
      <div class="code-flow-standalone">
        <h3>{{ texts().flowTitle }}</h3>
        <div class="flow-diagram">
          <div class="flow-step">{{ texts().flowSteps[0] }}</div>
          <div class="flow-arrow">{{ texts().flowSteps[1] }}</div>
          <div class="flow-step">{{ texts().flowSteps[2] }}</div>
          <div class="flow-arrow">{{ texts().flowSteps[3] }}</div>
          <div class="flow-step">{{ texts().flowSteps[4] }}</div>
        </div>
      </div>
    </div>
  </div>
</div>

