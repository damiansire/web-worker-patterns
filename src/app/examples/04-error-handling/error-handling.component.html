<div class="example-content">
  <h1>{{ texts().title }}</h1>
  <p class="subtitle">{{ texts().subtitle }}</p>

  <app-info-box [title]="texts().infoTitle">
    {{ texts().infoDescription }}
  </app-info-box>

  <app-code-explanation [summaryText]="texts().codeSummary">
    <app-code-section [title]="texts().codeSections?.configureHandler">
      <pre ngNonBindable><code>worker.onerror = function(error) {{ '{' }}
    console.error('Error:', error.message);
    error.preventDefault();
{{ '}' }};
</code></pre>
    </app-code-section>
    <app-code-section [title]="texts().codeSections?.throwError">
      <pre ngNonBindable><code>// Esto causar√° un ReferenceError
funcionQueNoExiste();

// O lanzar error personalizado
throw new Error('Error personalizado');
</code></pre>
    </app-code-section>
    <app-code-section tech="angular" [title]="texts().codeSections?.configureHandler">
      <pre ngNonBindable><code class="language-typescript">this.worker.onerror = (event: ErrorEvent) => {{ '{' }}
  event.preventDefault();

  this.addLog(this.texts().logs?.errorCaptured ?? 'Error captured in worker', 'error');
  this.addLog(this.format(this.texts().logs?.errorMessage, {{ '{' }} message: event.message {{ '}' }}), 'error');
  this.addLog(this.format(this.texts().logs?.errorFile, {{ '{' }} file: event.filename {{ '}' }}), 'error');

  setTimeout(() => {{ '{' }}
    this.worker?.terminate();
    this.createWorker();
  {{ '}' }}, 100);
{{ '}' }};
</code></pre>
    </app-code-section>
    <app-code-section tech="angular" [title]="texts().codeSections?.throwError">
      <pre ngNonBindable><code class="language-typescript">triggerError(type: string) {{ '{' }}
  this.addLog(
    this.format(this.texts().logs?.triggerError, {{ '{' }}
      type: this.getErrorTypeLabel(type as any)
    {{ '}' }}),
    'info'
  );

  this.worker?.postMessage({{ '{' }}
    action: 'triggerError',
    errorType: type
  {{ '}' }});
{{ '}' }};
</code></pre>
    </app-code-section>
  </app-code-explanation>

  <div class="error-types">
    @for (type of errorKeys; track type) {
      <div class="error-card" [class.success]="type === 'success'">
        <h3>{{ texts().errorTypes?.[type]?.title }}</h3>
        <p>{{ texts().errorTypes?.[type]?.description }}</p>
        <button (click)="triggerError(type)">{{ texts().errorTypes?.[type]?.button }}</button>
      </div>
    }
  </div>

  <app-log-panel 
    [logs]="logs()" 
    [title]="texts().logPanel?.title"
    [emptyMessage]="texts().logPanel?.empty"
    (clear)="clearLogs()">
  </app-log-panel>
</div>
