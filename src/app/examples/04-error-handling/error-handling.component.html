<div class="container">
  <h1>âš ï¸ Manejo de Errores en Workers</h1>
  <p class="subtitle">Ejemplo 04: Capturando y manejando errores</p>

  <div class="info-box">
    <strong>ğŸ’¡ Â¿QuÃ© demuestra este ejemplo?</strong>
    Los errores que ocurren dentro de un Web Worker deben ser manejados adecuadamente.
    Este ejemplo muestra diferentes tipos de errores y cÃ³mo capturarlos.
  </div>

  <details class="code-explanation">
    <summary>ğŸ“– Ver CÃ³digo - Â¿CÃ³mo funciona?</summary>
    <div class="code-section">
      <h3>1ï¸âƒ£ Configurar Error Handler</h3>
      <pre><code>worker.onerror = function(error) {{'{'}}
    console.error('Error:', error.message);
    error.preventDefault();
{{ '}' }};</code></pre>
    </div>
    <div class="code-section">
      <h3>2ï¸âƒ£ Provocar Error en Worker</h3>
      <pre><code>// Esto causarÃ¡ un ReferenceError
funcionQueNoExiste();

// O lanzar error personalizado
throw new Error('Error personalizado');</code></pre>
    </div>
  </details>

  <div class="error-types">
    <div class="error-card">
      <h3>âŒ 1. Error de Referencia</h3>
      <p>Intentar usar una funciÃ³n que no existe.</p>
      <button (click)="triggerError('reference')">Provocar ReferenceError</button>
    </div>

    <div class="error-card">
      <h3>ğŸ”¢ 2. Error de Tipo</h3>
      <p>OperaciÃ³n con tipo de dato incorrecto.</p>
      <button (click)="triggerError('type')">Provocar TypeError</button>
    </div>

    <div class="error-card">
      <h3>â— 3. Error MatemÃ¡tico</h3>
      <p>Operaciones matemÃ¡ticas invÃ¡lidas.</p>
      <button (click)="triggerError('math')">Provocar Error MatemÃ¡tico</button>
    </div>

    <div class="error-card">
      <h3>ğŸ¯ 4. Error Personalizado</h3>
      <p>Lanzar un error con mensaje especÃ­fico.</p>
      <button (click)="triggerError('custom')">Lanzar Error Personalizado</button>
    </div>

    <div class="error-card success">
      <h3>âœ… 5. OperaciÃ³n Exitosa</h3>
      <p>OperaciÃ³n que se completa sin errores.</p>
      <button (click)="triggerError('success')">Ejecutar sin Errores</button>
    </div>
  </div>

  <div class="console" #logContainer>
    <div class="console-header">
      <span class="title">ğŸ“‹ Consola de Eventos</span>
      <button (click)="clearLogs()">Limpiar</button>
    </div>
    <div class="log-container">
      @if (logs().length === 0) {
        <div class="log-entry info">
          <span class="timestamp">Sistema iniciado. Esperando acciones...</span>
        </div>
      } @else {
        @for (log of logs(); track $index) {
          <div class="log-entry" [class.info]="log.type === 'info'" [class.success]="log.type === 'success'" [class.error]="log.type === 'error'" [class.warning]="log.type === 'warning'">
            <span class="timestamp">[{{ log.timestamp }}]</span>
            <span class="message">{{ log.message }}</span>
          </div>
        }
      }
    </div>
  </div>
</div>
